{"ast":null,"code":"import React,{useEffect,useMemo,useRef}from'react';import{updateDocumentMeta}from'../../utils/seo';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LegalLayout=_ref=>{let{title,lastUpdated,robotsNoIndex=true,toc=[],children}=_ref;const mainRef=useRef(null);const today=useMemo(()=>{const d=new Date();return\"\".concat(d.getFullYear(),\"-\").concat(String(d.getMonth()+1).padStart(2,'0'),\"-\").concat(String(d.getDate()).padStart(2,'0'));},[]);useEffect(()=>{var _mainRef$current;// Focus main content for accessibility after navigation\n(_mainRef$current=mainRef.current)===null||_mainRef$current===void 0?void 0:_mainRef$current.focus();},[]);useEffect(()=>{// Set canonical for current URL\nconst href=typeof window!=='undefined'?window.location.href:undefined;if(href)updateDocumentMeta({canonical:href});// Optionally set robots meta for these pages\nconst name='robots';let meta=document.querySelector(\"meta[name=\\\"\".concat(name,\"\\\"]\"));if(!meta){meta=document.createElement('meta');meta.setAttribute('name',name);document.head.appendChild(meta);}meta.setAttribute('content',robotsNoIndex?'noindex,follow':'index,follow');return()=>{var _meta;// Do not remove meta to avoid thrashing; restore to index,follow\n(_meta=meta)===null||_meta===void 0?void 0:_meta.setAttribute('content','index,follow');};},[robotsNoIndex]);return/*#__PURE__*/_jsx(\"div\",{className:\"legal-layout\",children:/*#__PURE__*/_jsxs(\"main\",{ref:mainRef,tabIndex:-1,className:\"wrap\",\"aria-labelledby\":\"legal-title\",style:{paddingTop:24,paddingBottom:24},children:[/*#__PURE__*/_jsxs(\"header\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"h1\",{id:\"legal-title\",style:{margin:0},children:title}),/*#__PURE__*/_jsxs(\"p\",{className:\"muted\",style:{margin:'8px 0 0'},children:[\"Last updated: \",lastUpdated||today]})]}),toc.length>0&&/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Table of contents\",style:{margin:'12px 0 20px'},children:/*#__PURE__*/_jsx(\"ul\",{style:{margin:0,paddingLeft:16},children:toc.map(item=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\".concat(item.id),style:{color:'#6366f1'},children:item.label})},item.id))})}),/*#__PURE__*/_jsx(\"article\",{children:children})]})});};export default LegalLayout;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","updateDocumentMeta","jsx","_jsx","jsxs","_jsxs","LegalLayout","_ref","title","lastUpdated","robotsNoIndex","toc","children","mainRef","today","d","Date","concat","getFullYear","String","getMonth","padStart","getDate","_mainRef$current","current","focus","href","window","location","undefined","canonical","name","meta","document","querySelector","createElement","setAttribute","head","appendChild","_meta","className","ref","tabIndex","style","paddingTop","paddingBottom","marginBottom","id","margin","length","paddingLeft","map","item","color","label"],"sources":["/Users/p/Documents/pl_tv_mvp_spa/react-version/src/pages/legal/LegalLayout.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef } from 'react';\nimport { updateDocumentMeta } from '../../utils/seo';\n\ninterface TocItem {\n  id: string;\n  label: string;\n}\n\ninterface LegalLayoutProps {\n  title: string;\n  lastUpdated?: string; // YYYY-MM-DD\n  robotsNoIndex?: boolean;\n  toc?: TocItem[];\n  children: React.ReactNode;\n}\n\nconst LegalLayout: React.FC<LegalLayoutProps> = ({\n  title,\n  lastUpdated,\n  robotsNoIndex = true,\n  toc = [],\n  children,\n}) => {\n  const mainRef = useRef<HTMLElement>(null);\n\n  const today = useMemo(() => {\n    const d = new Date();\n    return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;\n  }, []);\n\n  useEffect(() => {\n    // Focus main content for accessibility after navigation\n    mainRef.current?.focus();\n  }, []);\n\n  useEffect(() => {\n    // Set canonical for current URL\n    const href = typeof window !== 'undefined' ? window.location.href : undefined;\n    if (href) updateDocumentMeta({ canonical: href });\n\n    // Optionally set robots meta for these pages\n    const name = 'robots';\n    let meta = document.querySelector(`meta[name=\"${name}\"]`);\n    if (!meta) {\n      meta = document.createElement('meta');\n      meta.setAttribute('name', name);\n      document.head.appendChild(meta);\n    }\n    meta.setAttribute('content', robotsNoIndex ? 'noindex,follow' : 'index,follow');\n    return () => {\n      // Do not remove meta to avoid thrashing; restore to index,follow\n      meta?.setAttribute('content', 'index,follow');\n    };\n  }, [robotsNoIndex]);\n\n  return (\n    <div className=\"legal-layout\">\n      <main ref={mainRef} tabIndex={-1} className=\"wrap\" aria-labelledby=\"legal-title\" style={{ paddingTop: 24, paddingBottom: 24 }}>\n        <header style={{ marginBottom: 16 }}>\n          <h1 id=\"legal-title\" style={{ margin: 0 }}>{title}</h1>\n          <p className=\"muted\" style={{ margin: '8px 0 0' }}>Last updated: {lastUpdated || today}</p>\n        </header>\n\n        {toc.length > 0 && (\n          <nav aria-label=\"Table of contents\" style={{ margin: '12px 0 20px' }}>\n            <ul style={{ margin: 0, paddingLeft: 16 }}>\n              {toc.map(item => (\n                <li key={item.id}>\n                  <a href={`#${item.id}`} style={{ color: '#6366f1' }}>{item.label}</a>\n                </li>\n              ))}\n            </ul>\n          </nav>\n        )}\n\n        <article>{children}</article>\n      </main>\n    </div>\n  );\n};\n\nexport default LegalLayout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}